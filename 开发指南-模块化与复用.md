# å¼€å‘æŒ‡å— 2.0 - æ¨¡å—åŒ–ä¸ä»£ç å¤ç”¨æœ€ä½³å®è·µ

## ğŸ“š ç›®å½•
1. [æ ¸å¿ƒåŸåˆ™ï¼šä»€ä¹ˆæ—¶å€™åˆ†ç¦»ï¼Œä»€ä¹ˆæ—¶å€™åˆå¹¶](#1-æ ¸å¿ƒåŸåˆ™)
2. [JavaScript ä¸ºä»€ä¹ˆè¦æ¨¡å—åŒ–](#2-javascript-æ¨¡å—åŒ–)
3. [CSS ä¸ºä»€ä¹ˆä¸åˆ†ç¦»](#3-css-å•æ–‡ä»¶)
4. [Python åç«¯çš„æ¨¡å—åŒ–](#4-python-åç«¯)
5. [ä»£ç å¤ç”¨ç­–ç•¥](#5-ä»£ç å¤ç”¨)
6. [å®æˆ˜æ¡ˆä¾‹åˆ†æ](#6-å®æˆ˜æ¡ˆä¾‹)
7. [å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ](#7-å¸¸è§é™·é˜±)

---

## 1. æ ¸å¿ƒåŸåˆ™ï¼šä»€ä¹ˆæ—¶å€™åˆ†ç¦»ï¼Œä»€ä¹ˆæ—¶å€™åˆå¹¶

### ğŸ¯ åˆ¤æ–­æ ‡å‡†ï¼ˆé»„é‡‘æ³•åˆ™ï¼‰

**è®°ä½è¿™ä¸ªå…¬å¼ï¼š**
```
åˆ†ç¦»åº¦ = (åŠŸèƒ½ç‹¬ç«‹æ€§ Ã— ä»£ç é‡) / (è€¦åˆç¨‹åº¦ Ã— å¤ç”¨é¢‘ç‡)

åˆ†ç¦»åº¦ > 1  â†’ åº”è¯¥æ‹†åˆ†
åˆ†ç¦»åº¦ < 1  â†’ åº”è¯¥åˆå¹¶
```

### ğŸ“Š å†³ç­–è¡¨

| ç‰¹å¾ | åº”è¯¥æ‹†åˆ† | åº”è¯¥åˆå¹¶ | æ‚¨çš„é¡¹ç›®å®ä¾‹ |
|------|---------|---------|------------|
| **åŠŸèƒ½ç‹¬ç«‹æ€§** | é«˜ | ä½ | JSæ¨¡å—ç‹¬ç«‹ âœ… |
| **ä»£ç é‡** | >300è¡Œ | <300è¡Œ | æ¯ä¸ªJSæ–‡ä»¶100-300è¡Œ âœ… |
| **è€¦åˆç¨‹åº¦** | ä½ | é«˜ | CSSé«˜åº¦è€¦åˆï¼ˆå…±äº«å˜é‡ï¼‰ |
| **å¤ç”¨é¢‘ç‡** | ä½ | é«˜ | CSSæ‰€æœ‰é¡µé¢éƒ½ç”¨ |
| **ä¿®æ”¹é¢‘ç‡** | ç‹¬ç«‹ä¿®æ”¹ | ä¸€èµ·ä¿®æ”¹ | JSç‹¬ç«‹è¿­ä»£ï¼ŒCSSç»Ÿä¸€ä¸»é¢˜ |
| **å›¢é˜Ÿåä½œ** | å¤šäººåˆ†å·¥ | å•äººç»´æŠ¤ | - |

---

### ğŸ§© æ‚¨çš„é¡¹ç›®ç»“æ„åˆ†æ

```
fastapiç‰ˆæœ¬/
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ js/          â† 11ä¸ªæ–‡ä»¶ï¼ˆå·²åˆ†ç¦»ï¼‰âœ…
â”‚   â”‚   â”œâ”€â”€ main.js           (84è¡Œ) å…¥å£
â”‚   â”‚   â”œâ”€â”€ ai_chat.js        (335è¡Œ) AIèŠå¤©
â”‚   â”‚   â”œâ”€â”€ lookup.js         (100è¡Œ) å•è¯æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ wordbook.js       (150è¡Œ) å•è¯åº“
â”‚   â”‚   â”œâ”€â”€ text.js           (100è¡Œ) æƒ…å¢ƒå¥
â”‚   â”‚   â”œâ”€â”€ dataset.js        (120è¡Œ) Excelç®¡ç†
â”‚   â”‚   â”œâ”€â”€ todayphrase.js    (80è¡Œ) ä»Šæ—¥ä¸€ç­¾
â”‚   â”‚   â”œâ”€â”€ onlinecount.js    (60è¡Œ) åœ¨çº¿ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ dom.js            (100è¡Œ) DOMæ“ä½œ
â”‚   â”‚   â””â”€â”€ utils.js          (50è¡Œ) å·¥å…·å‡½æ•°
â”‚   â”‚
â”‚   â””â”€â”€ css/         â† 1ä¸ªæ–‡ä»¶ï¼ˆæœªåˆ†ç¦»ï¼‰âœ…
â”‚       â””â”€â”€ style.css         (569è¡Œ) å…¨å±€æ ·å¼
â”‚
â””â”€â”€ routers/         â† 7ä¸ªæ–‡ä»¶ï¼ˆå·²åˆ†ç¦»ï¼‰âœ…
    â”œâ”€â”€ ai.py
    â”œâ”€â”€ lookup.py
    â”œâ”€â”€ wordbook.py
    â””â”€â”€ ...
```

**ç»“è®ºï¼šæ‚¨çš„æ¶æ„éå¸¸åˆç†ï¼** ğŸ‘

---

## 2. JavaScript ä¸ºä»€ä¹ˆè¦æ¨¡å—åŒ–

### âœ… ä¼˜åŠ¿åˆ†æ

#### **ä¼˜åŠ¿1ï¼šåŠŸèƒ½ç‹¬ç«‹ï¼Œæ˜“äºç»´æŠ¤**

```javascript
// âŒ ä¸å¥½ï¼šæ‰€æœ‰åŠŸèƒ½æ··åœ¨ä¸€èµ· (Flaskç‰ˆæœ¬çš„åšæ³•)
// app.js (2000è¡Œ)
function initAI() { ... }
function initLookup() { ... }
function initWordbook() { ... }
function initDataset() { ... }
// ... 200ä¸ªå‡½æ•°æ··åœ¨ä¸€èµ·

// æ‰¾ä¸€ä¸ªå‡½æ•°è¦ç¿»å¾ˆä¹…
// æ”¹AIåŠŸèƒ½å¯èƒ½å½±å“å…¶ä»–åŠŸèƒ½
// å¤šäººåä½œå®¹æ˜“å†²çª
```

```javascript
// âœ… å¥½ï¼šæŒ‰åŠŸèƒ½æ‹†åˆ†æ¨¡å— (FastAPIç‰ˆæœ¬çš„åšæ³•)
// ai_chat.js (335è¡Œ)
export function initChat() { ... }
export function sendMessage() { ... }
export function focusChat() { ... }

// lookup.js (100è¡Œ)
export function initLookup() { ... }
export function searchWord() { ... }

// æ‰¾åŠŸèƒ½å¾ˆå¿«ï¼šç›´æ¥æ‰“å¼€å¯¹åº”æ–‡ä»¶
// æ”¹AIä¸å½±å“æŸ¥è¯¢åŠŸèƒ½
// å¤šäººå¯ä»¥å¹¶è¡Œå¼€å‘
```

---

#### **ä¼˜åŠ¿2ï¼šæŒ‰éœ€åŠ è½½ï¼Œæ€§èƒ½æ›´å¥½**

```javascript
// main.js
import { initChat } from './ai_chat.js';
import { initLookup } from './lookup.js';

// ç”¨æˆ·æ‰“å¼€é¡µé¢
async function init() {
  // å…ˆåŠ è½½å¿…éœ€çš„æ¨¡å—
  await initNavigation();
  await initOnlineCount();
  
  // å…¶ä»–æ¨¡å—å¯ä»¥å»¶è¿ŸåŠ è½½ï¼ˆå¦‚æœéœ€è¦ï¼‰
  // ä½†æ‚¨çš„é¡¹ç›®æ˜¯å•é¡µåº”ç”¨ï¼Œæ‰€ä»¥ä¸€èµ·åŠ è½½ä¹Ÿæ²¡é—®é¢˜
}
```

**å¯¹æ¯”ï¼š**
```
å•æ–‡ä»¶ (all.js 3000è¡Œ)ï¼š
- ç”¨æˆ·åŠ è½½3000è¡Œä»£ç ï¼Œå³ä½¿åªç”¨AIèŠå¤©
- è§£ææ—¶é—´é•¿
- å†…å­˜å ç”¨å¤§

æ¨¡å—åŒ– (11ä¸ªæ–‡ä»¶)ï¼š
- æµè§ˆå™¨å¹¶è¡ŒåŠ è½½ï¼ˆHTTP/2ï¼‰
- æ¯ä¸ªæ–‡ä»¶å°ï¼Œè§£æå¿«
- å¯ä»¥æŒ‰éœ€ç¼“å­˜
```

---

#### **ä¼˜åŠ¿3ï¼šä»£ç å¤ç”¨ï¼Œé¿å…é‡å¤**

```javascript
// utils.js - æå–å…¬å…±å‡½æ•°
export function fetchJSON(url) {
  return fetch(url).then(r => r.json());
}

export function showToast(message) {
  // æ˜¾ç¤ºæç¤ºçš„é€šç”¨é€»è¾‘
}

// ai_chat.js ä¸­ä½¿ç”¨
import { fetchJSON, showToast } from './utils.js';
const data = await fetchJSON('/api/ai/keys');
showToast('åŠ è½½æˆåŠŸ');

// lookup.js ä¸­ä¹Ÿä½¿ç”¨
import { fetchJSON, showToast } from './utils.js';
const result = await fetchJSON('/api/lookup?word=apple');
showToast('æŸ¥è¯¢æˆåŠŸ');

// âœ… å¥½å¤„ï¼š
// - fetchJSON åªå†™ä¸€æ¬¡ï¼Œå¤šå¤„ä½¿ç”¨
// - å¦‚æœè¦æ”¹æˆæ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼Œåªéœ€æ”¹ utils.js
// - ä¸ä¼šæœ‰é‡å¤ä»£ç 
```

---

#### **ä¼˜åŠ¿4ï¼šä¾èµ–å…³ç³»æ¸…æ™°**

```javascript
// main.js - å…¥å£æ–‡ä»¶
import { els, initNavigation } from './dom.js';        // â† DOMæ“ä½œ
import { fetchJSON } from './utils.js';                // â† å·¥å…·å‡½æ•°
import { initChat } from './ai_chat.js';               // â† AIèŠå¤©
import { initLookup } from './lookup.js';              // â† æŸ¥è¯¢

// ä¸€çœ¼å°±èƒ½çœ‹å‡ºï¼š
// - main.js ä¾èµ– dom.js, utils.js, ai_chat.js, lookup.js
// - å¦‚æœåˆ é™¤ ai_chat.jsï¼Œimport ä¼šæŠ¥é”™ï¼Œç«‹å³å‘ç°é—®é¢˜
```

**å¯¹æ¯”å•æ–‡ä»¶ï¼š**
```javascript
// all.js
function a() { b(); }  // aä¾èµ–b
function c() { a(); }  // cä¾èµ–a
function d() { e(); }  // dä¾èµ–e

// é—®é¢˜ï¼šä¾èµ–å…³ç³»ä¸æ˜æ˜¾
// åˆ é™¤å‡½æ•°å¯èƒ½å¯¼è‡´å…¶ä»–åœ°æ–¹æŠ¥é”™ï¼Œä¸å®¹æ˜“å‘ç°
```

---

### âš ï¸ JavaScript æ¨¡å—åŒ–çš„æ½œåœ¨é—®é¢˜

#### **é—®é¢˜1ï¼šHTTPè¯·æ±‚å¢å¤š**

```
å•æ–‡ä»¶ï¼š1ä¸ªè¯·æ±‚
æ¨¡å—åŒ–ï¼š11ä¸ªè¯·æ±‚

è§£å†³æ–¹æ¡ˆï¼š
1. HTTP/2 å¹¶è¡ŒåŠ è½½ï¼ˆç°ä»£æµè§ˆå™¨é»˜è®¤æ”¯æŒï¼‰
2. ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…ï¼ˆVite/Webpackï¼‰
3. æ‚¨çš„é¡¹ç›®åªæœ‰11ä¸ªå°æ–‡ä»¶ï¼Œå½±å“å¾ˆå°
```

#### **é—®é¢˜2ï¼šimport/export æµè§ˆå™¨å…¼å®¹æ€§**

```javascript
// ES6 modules éœ€è¦ç°ä»£æµè§ˆå™¨
import { initChat } from './ai_chat.js';

// å…¼å®¹æ€§ï¼š
âœ… Chrome 61+
âœ… Firefox 60+
âœ… Safari 11+
âœ… Edge 16+

// å¦‚æœéœ€è¦æ”¯æŒè€æµè§ˆå™¨ï¼šä½¿ç”¨ Babel è½¬è¯‘
```

#### **é—®é¢˜3ï¼šå¾ªç¯ä¾èµ–**

```javascript
// âŒ é”™è¯¯ï¼šå¾ªç¯ä¾èµ–
// a.js
import { funcB } from './b.js';
export function funcA() { funcB(); }

// b.js
import { funcA } from './a.js';  // â† å¾ªç¯äº†ï¼
export function funcB() { funcA(); }

// è§£å†³ï¼šé‡æ–°è®¾è®¡æ¨¡å—ç»“æ„ï¼Œé¿å…å¾ªç¯
```

#### **é—®é¢˜4ï¼šå…¨å±€çŠ¶æ€ç®¡ç†**

```javascript
// é—®é¢˜ï¼šå¤šä¸ªæ¨¡å—å…±äº«çŠ¶æ€
// ai_chat.js
let currentModel = 'Qwen/QwQ-32B';

// wordbook.js
// å¦‚ä½•è®¿é—® ai_chat.js çš„ currentModelï¼Ÿ

// è§£å†³æ–¹æ¡ˆ1ï¼šé€šè¿‡å¯¼å‡º
// state.js
export let appState = {
  currentModel: 'Qwen/QwQ-32B',
  currentUser: null,
};

// ai_chat.js
import { appState } from './state.js';
appState.currentModel = 'DeepSeek-V3';

// è§£å†³æ–¹æ¡ˆ2ï¼šäº‹ä»¶æ€»çº¿ï¼ˆå¤æ‚åœºæ™¯ï¼‰
```

---

### ğŸ¯ JavaScript æ¨¡å—åŒ–æœ€ä½³å®è·µ

#### **å®è·µ1ï¼šæŒ‰åŠŸèƒ½æ‹†åˆ†**

```javascript
// âœ… å¥½çš„æ‹†åˆ†æ–¹å¼
ai_chat.js      â†’ AIèŠå¤©ç›¸å…³åŠŸèƒ½
lookup.js       â†’ å•è¯æŸ¥è¯¢åŠŸèƒ½
wordbook.js     â†’ å•è¯åº“åŠŸèƒ½
dataset.js      â†’ æ•°æ®é›†ç®¡ç†

// âŒ ä¸å¥½çš„æ‹†åˆ†æ–¹å¼
buttons.js      â†’ æ‰€æœ‰æŒ‰é’®ï¼ˆåŠŸèƒ½åˆ†æ•£ï¼‰
forms.js        â†’ æ‰€æœ‰è¡¨å•ï¼ˆåŠŸèƒ½åˆ†æ•£ï¼‰
```

#### **å®è·µ2ï¼šå•ä¸€èŒè´£**

```javascript
// âœ… å¥½ï¼šæ¯ä¸ªæ–‡ä»¶åªåšä¸€ä»¶äº‹
// utils.js - åªæä¾›å·¥å…·å‡½æ•°
export function fetchJSON(url) { ... }
export function debounce(fn, delay) { ... }

// dom.js - åªå¤„ç†DOMæ“ä½œ
export const els = { ... };
export function showToast(msg) { ... }

// âŒ ä¸å¥½ï¼šä¸€ä¸ªæ–‡ä»¶åšå¤ªå¤šäº‹
// helpers.js
export function fetchJSON() { ... }  // ç½‘ç»œ
export function showToast() { ... }  // DOM
export function formatDate() { ... }  // æ—¥æœŸ
export function validateEmail() { ... }  // éªŒè¯
// å¤ªæ‚äº†ï¼Œä¸å¥½ç»´æŠ¤
```

#### **å®è·µ3ï¼šæ˜ç¡®å¯¼å‡º**

```javascript
// âœ… å¥½ï¼šæ˜ç¡®å¯¼å‡º
export function initChat() { ... }
export function sendMessage() { ... }
// å…¶ä»–å‡½æ•°ä¸å¯¼å‡ºï¼ˆç§æœ‰ï¼‰

// âŒ ä¸å¥½ï¼šå¯¼å‡ºå¤ªå¤š
export function initChat() { ... }
export function _helperA() { ... }  // å†…éƒ¨å‡½æ•°ä¹Ÿå¯¼å‡º
export function _helperB() { ... }
// æš´éœ²å¤ªå¤šå†…éƒ¨å®ç°ï¼Œéš¾ä»¥é‡æ„
```

---

## 3. CSS ä¸ºä»€ä¹ˆä¸åˆ†ç¦»

### âœ… å•æ–‡ä»¶çš„ä¼˜åŠ¿

#### **ä¼˜åŠ¿1ï¼šé¿å…é‡å¤ä»£ç **

```css
/* âœ… å¥½ï¼šå•æ–‡ä»¶ style.css */
.button {
  padding: 10px 20px;
  border-radius: 8px;
  background: var(--blue);
  transition: all 0.2s;
}

/* AIèŠå¤©ã€æŸ¥è¯¢ã€å•è¯åº“éƒ½ç”¨è¿™ä¸ª .button */
<button class="button">å‘é€</button>
<button class="button">æŸ¥è¯¢</button>
<button class="button">åŠ è½½</button>
```

```css
/* âŒ ä¸å¥½ï¼šæ‹†æˆå¤šä¸ªæ–‡ä»¶ */

/* ai.css */
.ai-button {
  padding: 10px 20px;
  border-radius: 8px;
  background: var(--blue);
  transition: all 0.2s;
}

/* lookup.css */
.lookup-button {
  padding: 10px 20px;        /* â† é‡å¤äº†ï¼ */
  border-radius: 8px;        /* â† é‡å¤äº†ï¼ */
  background: var(--blue);   /* â† é‡å¤äº†ï¼ */
  transition: all 0.2s;      /* â† é‡å¤äº†ï¼ */
}

/* é—®é¢˜ï¼š
1. å†™äº†ä¸¤éç›¸åŒä»£ç 
2. æ”¹æŒ‰é’®åœ†è§’è¦æ”¹ä¸¤ä¸ªåœ°æ–¹
3. å®¹æ˜“æ¼æ”¹ï¼Œå¯¼è‡´ä¸ä¸€è‡´
*/
```

---

#### **ä¼˜åŠ¿2ï¼šå…¨å±€ä¸»é¢˜ç»Ÿä¸€**

```css
/* âœ… å¥½ï¼šå˜é‡ç»Ÿä¸€å®šä¹‰ */
:root {
  --blue: #2aabee;
  --text: #2b2f33;
  --line: #e5e9ef;
  --radius: 8px;
}

/* æ‰€æœ‰ç»„ä»¶ä½¿ç”¨å˜é‡ */
.button { 
  background: var(--blue); 
  border-radius: var(--radius);
}
.card { 
  border: 1px solid var(--line); 
  border-radius: var(--radius);
}
.bubble { 
  color: var(--text); 
}

/* ä¿®æ”¹ä¸»é¢˜ï¼šåªéœ€æ”¹å˜é‡å®šä¹‰ */
:root {
  --blue: #ff6b6b;  /* â† æ”¹ä¸€æ¬¡ï¼Œå…¨å±€ç”Ÿæ•ˆï¼ */
}
```

**å¦‚æœæ‹†åˆ†æ–‡ä»¶ï¼š**
```css
/* ai.css */
:root { --blue: #2aabee; }  /* â† å®šä¹‰å˜é‡ */
.ai-button { background: var(--blue); }

/* lookup.css */
:root { --blue: #2aabee; }  /* â† åˆå®šä¹‰ä¸€éï¼Ÿ */
.lookup-button { background: var(--blue); }

/* é—®é¢˜ï¼š
1. å˜é‡å®šä¹‰é‡å¤
2. ä¿®æ”¹ä¸»é¢˜è¦æ”¹å¤šä¸ªæ–‡ä»¶
3. å¯èƒ½å‡ºç°ä¸åŒæ–‡ä»¶ç”¨ä¸åŒé¢œè‰²
*/
```

---

#### **ä¼˜åŠ¿3ï¼šå“åº”å¼è®¾è®¡é›†ä¸­ç®¡ç†**

```css
/* âœ… å¥½ï¼šæ‰€æœ‰å“åº”å¼æ ·å¼æ”¾åœ¨ä¸€èµ· */

/* æ¡Œé¢æ ·å¼ */
.button { font-size: 16px; padding: 10px 20px; }
.bubble { max-width: 720px; }
.sidebar { width: 320px; }

/* å¹³æ¿ */
@media (max-width: 768px) {
  .button { font-size: 14px; padding: 8px 16px; }
  .bubble { max-width: 100%; }
  .sidebar { width: 280px; }
}

/* æ‰‹æœº */
@media (max-width: 480px) {
  .button { font-size: 12px; padding: 6px 12px; }
  .sidebar { display: none; }
}

/* ä¼˜åŠ¿ï¼š
- ä¸€çœ¼çœ‹å‡ºæ‰€æœ‰å“åº”å¼æ–­ç‚¹
- æ”¹ä¸€ä¸ª @mediaï¼Œæ‰€æœ‰ç»„ä»¶ä¸€èµ·é€‚é…
- ä¸ä¼šé—æ¼æŸä¸ªç»„ä»¶
*/
```

**å¦‚æœæ‹†åˆ†ï¼š**
```css
/* button.css */
.button { font-size: 16px; }
@media (max-width: 768px) {
  .button { font-size: 14px; }
}

/* bubble.css */
.bubble { max-width: 720px; }
@media (max-width: 768px) {
  .bubble { max-width: 100%; }
}

/* é—®é¢˜ï¼š
1. åŒä¸€ä¸ª @media åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶
2. æ”¹å“åº”å¼æ–­ç‚¹è¦æ”¹å¤šä¸ªæ–‡ä»¶
3. å¯èƒ½æ¼æ”¹æŸäº›æ–‡ä»¶
*/
```

---

#### **ä¼˜åŠ¿4ï¼šæ€§èƒ½æœ€ä¼˜**

```
å•æ–‡ä»¶ style.css (569è¡Œ â‰ˆ 20KB)ï¼š
âœ… 1ä¸ªHTTPè¯·æ±‚
âœ… 1æ¬¡DNSæŸ¥è¯¢
âœ… æµè§ˆå™¨ç¼“å­˜1æ¬¡
âœ… Gzipå‹ç¼©æ•ˆç‡é«˜ï¼ˆé‡å¤ä»£ç å‹ç¼©ç‡é«˜ï¼‰
âœ… åŠ è½½é€Ÿåº¦ï¼š~50ms

å¤šæ–‡ä»¶ (å‡è®¾æ‹†æˆ5ä¸ª)ï¼š
âŒ 5ä¸ªHTTPè¯·æ±‚
âŒ å¯èƒ½éœ€è¦å¤šæ¬¡DNSæŸ¥è¯¢
âŒ æµè§ˆå™¨éœ€è¦ç¼“å­˜5ä¸ªæ–‡ä»¶
âŒ æ€»å¤§å°å¯èƒ½æ›´å¤§ï¼ˆé‡å¤ä»£ç ï¼‰
âŒ åŠ è½½é€Ÿåº¦ï¼š~200ms
```

---

### âš ï¸ CSS å•æ–‡ä»¶çš„æ½œåœ¨é—®é¢˜

#### **é—®é¢˜1ï¼šæ–‡ä»¶å¤ªå¤§ï¼Œéš¾ä»¥æŸ¥æ‰¾**

```css
/* é—®é¢˜ï¼š569è¡Œï¼ŒCtrl+F æŸ¥æ‰¾æ•ˆç‡ä½ï¼Ÿ*/

/* è§£å†³æ–¹æ¡ˆï¼šç”¨æ¸…æ™°çš„æ³¨é‡Šåˆ†ç»„ */
/* ============================================
   1. åŸºç¡€æ ·å¼ (1-50è¡Œ)
   ============================================ */
:root { ... }
body { ... }

/* ============================================
   2. å¸ƒå±€ç³»ç»Ÿ (51-150è¡Œ)
   ============================================ */
.app { ... }
.sidebar { ... }

/* ============================================
   3. é€šç”¨ç»„ä»¶ (151-300è¡Œ)
   ============================================ */
.button { ... }
.card { ... }

/* ============================================
   4. AIèŠå¤©æ¨¡å— (301-400è¡Œ)
   ============================================ */
.ai-list { ... }

/* ä¼˜åŠ¿ï¼š
- æ³¨é‡Šå°±åƒç›®å½•ï¼Œå¿«é€Ÿå®šä½
- Ctrl+F æœç´¢"AIèŠå¤©"ç«‹å³è·³è½¬
- æ¯”æ‹†æˆå¤šä¸ªæ–‡ä»¶æ›´å¿«
*/
```

#### **é—®é¢˜2ï¼šå¤šäººç¼–è¾‘å†²çª**

```css
/* é—®é¢˜ï¼š2ä¸ªäººåŒæ—¶æ”¹ style.cssï¼ŒGitå†²çªï¼Ÿ*/

/* è§£å†³æ–¹æ¡ˆ1ï¼šæ¨¡å—åŒ–ç¼–è¾‘ä¹ æƒ¯ */
å¼€å‘è€…Aï¼šåªæ”¹ /* AIèŠå¤©æ¨¡å— */ éƒ¨åˆ†
å¼€å‘è€…Bï¼šåªæ”¹ /* å•è¯åº“æ¨¡å— */ éƒ¨åˆ†
â†’ Git å¯ä»¥è‡ªåŠ¨åˆå¹¶ï¼ˆæ”¹çš„æ˜¯ä¸åŒè¡Œï¼‰

/* è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨ CSS é¢„å¤„ç†å™¨ï¼ˆå¦‚æœå›¢é˜Ÿå¤§ï¼‰*/
src/
â”œâ”€â”€ _base.scss
â”œâ”€â”€ _layout.scss
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ _button.scss
â”‚   â””â”€â”€ _card.scss
â””â”€â”€ main.scss  â†’ ç¼–è¯‘æˆ style.css

// ä¼˜åŠ¿ï¼šå¼€å‘æ—¶æ¨¡å—åŒ–ï¼Œç”Ÿäº§ç¯å¢ƒå•æ–‡ä»¶
// ä½†å¯¹æ‚¨çš„é¡¹ç›®æ¥è¯´ï¼Œè¿‡åº¦è®¾è®¡äº†
```

---

### ğŸ¯ CSS å•æ–‡ä»¶æœ€ä½³å®è·µ

#### **å®è·µ1ï¼šæŒ‰å±‚çº§ç»„ç»‡ï¼ˆæ¨èï¼‰**

```css
/* 1. å˜é‡å’Œé…ç½® */
:root { ... }

/* 2. å…¨å±€é‡ç½® */
* { box-sizing: border-box; }
body { ... }

/* 3. å¸ƒå±€ç³»ç»Ÿ */
.app { ... }
.main { ... }

/* 4. é€šç”¨ç»„ä»¶ï¼ˆé«˜å¤ç”¨ï¼‰ */
.button { ... }
.card { ... }
.bubble { ... }

/* 5. åŠŸèƒ½æ¨¡å—ï¼ˆæŒ‰é¡µé¢/åŠŸèƒ½ï¼‰ */
.ai-list { ... }
.wordbook { ... }

/* 6. å·¥å…·ç±» */
.text-center { ... }
.mt-2 { ... }

/* 7. å“åº”å¼ */
@media (max-width: 768px) { ... }
```

#### **å®è·µ2ï¼šå‘½åè§„èŒƒï¼ˆBEMï¼‰**

```css
/* âœ… å¥½ï¼šBEMå‘½å */
.ai-list { ... }                 /* å— */
.ai-list__item { ... }           /* å…ƒç´  */
.ai-list__item--active { ... }   /* ä¿®é¥°ç¬¦ */

/* ä¼˜åŠ¿ï¼š
- ä¸€çœ‹å°±çŸ¥é“å±äºå“ªä¸ªæ¨¡å—
- é¿å…å‘½åå†²çª
- ä¾¿äºæœç´¢å’Œç»´æŠ¤
*/

/* âŒ ä¸å¥½ï¼šé€šç”¨å‘½å */
.list { ... }    /* å¤ªé€šç”¨ï¼Œå®¹æ˜“å†²çª */
.item { ... }    /* ä¸çŸ¥é“å±äºå“ªä¸ªæ¨¡å— */
.active { ... }  /* å¤ªæ³›ï¼Œå¯èƒ½å½±å“å…¶ä»–å…ƒç´  */
```

---

## 4. Python åç«¯çš„æ¨¡å—åŒ–

### âœ… æ‚¨çš„åç«¯æ¶æ„ï¼ˆä¼˜ç§€ï¼‰

```python
fastapiç‰ˆæœ¬/
â”œâ”€â”€ main.py              (124è¡Œ) å…¥å£ï¼Œå¯åŠ¨é…ç½®
â”œâ”€â”€ core/                æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ config.py        (50è¡Œ) é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database.py      (80è¡Œ) æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ loading.py       (60è¡Œ) åŠ è½½çŠ¶æ€
â”‚   â””â”€â”€ utils.py         (40è¡Œ) å·¥å…·å‡½æ•°
â””â”€â”€ routers/             è·¯ç”±æ¨¡å—ï¼ˆæŒ‰åŠŸèƒ½ï¼‰
    â”œâ”€â”€ ai.py            (207è¡Œ) AIèŠå¤©
    â”œâ”€â”€ lookup.py        (40è¡Œ) å•è¯æŸ¥è¯¢
    â”œâ”€â”€ wordbook.py      (70è¡Œ) å•è¯åº“
    â”œâ”€â”€ excel.py         (100è¡Œ) Excelç®¡ç†
    â”œâ”€â”€ sentences.py     (50è¡Œ) æƒ…å¢ƒå¥
    â”œâ”€â”€ todayphrase.py   (60è¡Œ) ä»Šæ—¥ä¸€ç­¾
    â””â”€â”€ site.py          (40è¡Œ) ç«™ç‚¹ç»Ÿè®¡
```

**ä¸ºä»€ä¹ˆè¿™æ ·æ‹†åˆ†ï¼Ÿ**

```python
# main.py - åªè´Ÿè´£å¯åŠ¨å’Œé…ç½®
from fastapi import FastAPI
from routers import ai, lookup, wordbook

app = FastAPI()
app.include_router(ai.router)
app.include_router(lookup.router)
app.include_router(wordbook.router)

# âœ… ä¼˜åŠ¿ï¼š
# 1. main.py å¾ˆç®€æ´ï¼Œåªçœ‹å¯åŠ¨é€»è¾‘
# 2. æ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹åœ¨è‡ªå·±çš„æ–‡ä»¶
# 3. æ”¹AIåŠŸèƒ½ä¸å½±å“æŸ¥è¯¢åŠŸèƒ½
```

---

### ğŸ“Š åç«¯æ¨¡å—åŒ–åˆ¤æ–­æ ‡å‡†

| æ¨¡å— | è¡Œæ•° | æ˜¯å¦ç‹¬ç«‹ | æ˜¯å¦æ‹†åˆ† | åŸå›  |
|------|------|---------|---------|------|
| **ai.py** | 207è¡Œ | âœ… | âœ… æ‹†åˆ† | åŠŸèƒ½ç‹¬ç«‹ï¼Œä»£ç é‡å¤§ |
| **lookup.py** | 40è¡Œ | âœ… | âœ… æ‹†åˆ† | åŠŸèƒ½ç‹¬ç«‹ï¼Œè™½ç„¶ä»£ç å°‘ä½†é€»è¾‘æ¸…æ™° |
| **config.py** | 50è¡Œ | âš ï¸ | âœ… æ‹†åˆ† | é…ç½®é›†ä¸­ç®¡ç†ï¼Œå¤šå¤„å¼•ç”¨ |
| **utils.py** | 40è¡Œ | âŒ | âœ… æ‹†åˆ† | å·¥å…·å‡½æ•°ï¼Œé¿å…é‡å¤ |

---

### ğŸ¯ åç«¯æ¨¡å—åŒ–æœ€ä½³å®è·µ

#### **å®è·µ1ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†**

```python
# âœ… å¥½ï¼šæŒ‰åŠŸèƒ½æ‹†åˆ†
routers/
â”œâ”€â”€ ai.py         â†’ AIèŠå¤©ç›¸å…³çš„æ‰€æœ‰æ¥å£
â”œâ”€â”€ lookup.py     â†’ å•è¯æŸ¥è¯¢ç›¸å…³çš„æ‰€æœ‰æ¥å£
â””â”€â”€ wordbook.py   â†’ å•è¯åº“ç›¸å…³çš„æ‰€æœ‰æ¥å£

# âŒ ä¸å¥½ï¼šæŒ‰æŠ€æœ¯å±‚æ‹†åˆ†
routers/
â”œâ”€â”€ get_apis.py   â†’ æ‰€æœ‰GETè¯·æ±‚ï¼ˆåŠŸèƒ½åˆ†æ•£ï¼‰
â”œâ”€â”€ post_apis.py  â†’ æ‰€æœ‰POSTè¯·æ±‚ï¼ˆåŠŸèƒ½åˆ†æ•£ï¼‰
â””â”€â”€ database.py   â†’ æ‰€æœ‰æ•°æ®åº“æ“ä½œï¼ˆåŠŸèƒ½åˆ†æ•£ï¼‰
```

#### **å®è·µ2ï¼šæå–å…¬å…±é€»è¾‘**

```python
# âœ… å¥½ï¼šæå–å…¬å…±å‡½æ•°
# routers/ai.py
def _get_api_key_from_payload(payload: dict) -> str:
    """ä»payloadä¸­è·å–APIå¯†é’¥"""
    # å…¬å…±é€»è¾‘ï¼Œä¸¤ä¸ªæ¥å£éƒ½ç”¨
    ...

@router.post("/api/ai/chat")
async def api_ai_chat(payload: dict):
    api_key = _get_api_key_from_payload(payload)  # â† å¤ç”¨
    ...

@router.post("/api/ai/chat/stream")
async def api_ai_chat_stream(payload: dict):
    api_key = _get_api_key_from_payload(payload)  # â† å¤ç”¨
    ...

# âŒ ä¸å¥½ï¼šé‡å¤ä»£ç 
@router.post("/api/ai/chat")
async def api_ai_chat(payload: dict):
    api_key = (payload.get("api_key") or "").strip()
    key_index = payload.get("key_index", None)
    if (not api_key) and key_index is not None:
        # ... 13è¡Œé‡å¤ä»£ç 
    ...

@router.post("/api/ai/chat/stream")
async def api_ai_chat_stream(payload: dict):
    api_key = (payload.get("api_key") or "").strip()
    key_index = payload.get("key_index", None)
    if (not api_key) and key_index is not None:
        # ... 13è¡Œé‡å¤ä»£ç ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰
    ...
```

---

## 5. ä»£ç å¤ç”¨ç­–ç•¥

### ğŸ¯ å¤ç”¨çš„ä¸‰ä¸ªå±‚æ¬¡

#### **å±‚æ¬¡1ï¼šå‡½æ•°çº§å¤ç”¨ï¼ˆæœ€å¸¸è§ï¼‰**

```javascript
// utils.js
export function fetchJSON(url) {
  return fetch(url).then(r => r.json());
}

// å¤šå¤„ä½¿ç”¨
import { fetchJSON } from './utils.js';
const data1 = await fetchJSON('/api/ai/keys');
const data2 = await fetchJSON('/api/lookup?word=apple');
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… åŒæ ·çš„é€»è¾‘åœ¨2ä¸ªä»¥ä¸Šåœ°æ–¹ä½¿ç”¨ â†’ æå–å‡½æ•°
- âŒ åªç”¨ä¸€æ¬¡ â†’ ä¸éœ€è¦æå–

---

#### **å±‚æ¬¡2ï¼šæ¨¡å—çº§å¤ç”¨**

```javascript
// dom.js - æä¾›DOMæ“ä½œçš„æ¨¡å—
export const els = {
  aiInput: document.getElementById('aiInput'),
  aiSend: document.getElementById('aiSend'),
  // ... æ‰€æœ‰DOMå…ƒç´ 
};

export function showToast(message) {
  // Toastæ˜¾ç¤ºé€»è¾‘
}

// å¤šä¸ªæ¨¡å—éƒ½éœ€è¦DOMæ“ä½œ
import { els, showToast } from './dom.js';
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… ç›¸å…³çš„å‡½æ•°ç»„æˆä¸€ä¸ªä¸»é¢˜ â†’ æå–æ¨¡å—
- âœ… å¤šä¸ªæ¨¡å—éƒ½éœ€è¦è¿™äº›åŠŸèƒ½ â†’ æå–æ¨¡å—

---

#### **å±‚æ¬¡3ï¼šæ ·å¼çº§å¤ç”¨ï¼ˆCSSï¼‰**

```css
/* åŸºç¡€ç»„ä»¶æ ·å¼ */
.button {
  /* æŒ‰é’®åŸºç¡€æ ·å¼ */
}

.button-primary {
  /* ç»§æ‰¿ .buttonï¼Œæ‰©å±•ä¸»è¦æŒ‰é’®æ ·å¼ */
}

.button-small {
  /* ç»§æ‰¿ .buttonï¼Œæ‰©å±•å°æŒ‰é’®æ ·å¼ */
}
```

```html
<!-- ä½¿ç”¨ç»„åˆç±»å -->
<button class="button button-primary">å‘é€</button>
<button class="button button-small">å–æ¶ˆ</button>
```

---

### ğŸš« è¿‡åº¦å¤ç”¨çš„é™·é˜±

#### **é™·é˜±1ï¼šè¿‡åº¦æŠ½è±¡**

```javascript
// âŒ ä¸å¥½ï¼šè¿‡åº¦æŠ½è±¡
function processData(data, type, mode, flag1, flag2, options) {
  if (type === 'A' && mode === 1) {
    if (flag1) { /* é€»è¾‘1 */ }
    if (flag2) { /* é€»è¾‘2 */ }
  } else if (type === 'B' && mode === 2) {
    // ... å¤æ‚çš„æ¡ä»¶åˆ¤æ–­
  }
  // è¯•å›¾ç”¨ä¸€ä¸ªå‡½æ•°å¤„ç†æ‰€æœ‰æƒ…å†µï¼Œç»“æœå¾ˆéš¾ç†è§£
}

// âœ… å¥½ï¼šæ‹†åˆ†æˆå¤šä¸ªç®€å•å‡½æ•°
function processTypeA(data, enableSpecial) { ... }
function processTypeB(data, options) { ... }
```

**åŸåˆ™ï¼š**
- æŠ½è±¡æ˜¯ä¸ºäº†ç®€åŒ–ï¼Œä¸æ˜¯ä¸ºäº†ç‚«æŠ€
- å¦‚æœå‡½æ•°å‚æ•°è¶…è¿‡3ä¸ªï¼Œè€ƒè™‘æ˜¯å¦è¿‡åº¦æŠ½è±¡

---

#### **é™·é˜±2ï¼šè¿‡æ—©ä¼˜åŒ–**

```javascript
// âŒ ä¸å¥½ï¼šåªç”¨ä¸€æ¬¡å°±æå–
function getAIButtonText() {  // åªæœ‰ä¸€ä¸ªåœ°æ–¹ç”¨
  return 'å‘é€';
}

// âœ… å¥½ï¼šç”¨2æ¬¡ä»¥ä¸Šå†æå–
const btnText1 = 'å‘é€';  // ç¬¬ä¸€æ¬¡ï¼šç›´æ¥å†™
const btnText2 = 'å‘é€';  // ç¬¬äºŒæ¬¡ï¼šç›´æ¥å†™
// ç¬¬ä¸‰æ¬¡æ‰è€ƒè™‘æå–
```

**åŸåˆ™ï¼š**
- è§„åˆ™ï¼šç”¨3æ¬¡æ‰æå–ï¼ˆRule of Threeï¼‰
- è¿‡æ—©æå–ä¼šå¢åŠ å¤æ‚åº¦

---

## 6. å®æˆ˜æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹1ï¼šAIèŠå¤©åŠŸèƒ½çš„æ¨¡å—åŒ–

#### **å½“å‰ç»“æ„ï¼ˆä¼˜ç§€ï¼‰**

```javascript
// ai_chat.js (335è¡Œ)
import { els, showToast } from './dom.js';    // â† å¤ç”¨DOMæ“ä½œ
import { fetchJSON } from './utils.js';        // â† å¤ç”¨å·¥å…·å‡½æ•°

let sending = false;  // â† æ¨¡å—å†…éƒ¨çŠ¶æ€
let pendingBubble = null;

export function initChat() { ... }             // â† å¯¼å‡ºå…¬å…±API
export function focusChat() { ... }

function sendMessage() { ... }                 // â† ç§æœ‰å‡½æ•°
function showPending() { ... }
```

**ä¸ºä»€ä¹ˆè¿™æ ·å¥½ï¼Ÿ**

1. **åŠŸèƒ½ç‹¬ç«‹**ï¼šAIèŠå¤©çš„æ‰€æœ‰ä»£ç åœ¨ä¸€ä¸ªæ–‡ä»¶
2. **ä¾èµ–æ˜ç¡®**ï¼šæ¸…æ¥šä¾èµ– dom.js å’Œ utils.js
3. **çŠ¶æ€å°è£…**ï¼šsending ç­‰çŠ¶æ€æ˜¯ç§æœ‰çš„
4. **æ¥å£æ˜ç¡®**ï¼šåªå¯¼å‡º initChat å’Œ focusChat

---

#### **å¦‚æœä¸æ‹†åˆ†ä¼šæ€æ ·ï¼Ÿ**

```javascript
// âŒ ä¸å¥½ï¼šæ‰€æœ‰åŠŸèƒ½æ··åœ¨ä¸€èµ·
// app.js (3000è¡Œ)

// AIèŠå¤©ç›¸å…³
let aiSending = false;
function initAI() { ... }
function sendAIMessage() { ... }

// å•è¯æŸ¥è¯¢ç›¸å…³  
let lookupLoading = false;
function initLookup() { ... }
function searchWord() { ... }

// å•è¯åº“ç›¸å…³
let wbCurrentPage = 1;
function initWordbook() { ... }
function loadPage() { ... }

// é—®é¢˜ï¼š
// 1. 3000è¡Œï¼Œæ‰¾å‡½æ•°è¦ç¿»å¾ˆä¹…
// 2. å˜é‡å®¹æ˜“å†²çªï¼ˆaiSending vs lookupLoadingï¼‰
// 3. æ”¹AIåŠŸèƒ½å¯èƒ½å½±å“å…¶ä»–åŠŸèƒ½
// 4. å¤šäººå¼€å‘å†²çªå¤š
```

---

### æ¡ˆä¾‹2ï¼šæŒ‰é’®æ ·å¼çš„å¤ç”¨

#### **å½“å‰ç»“æ„ï¼ˆä¼˜ç§€ï¼‰**

```css
/* style.css */

/* åŸºç¡€æŒ‰é’®æ ·å¼ */
.btn-primary {
  padding: 0 20px;
  height: 44px;
  border-radius: 22px;
  background: linear-gradient(180deg, var(--blue-grad-start), var(--blue-grad-end));
  color: #fff;
  transition: all 0.2s;
}

.btn-copy {
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: #fff;
  transition: all 0.2s;
}

.btn-icon {
  padding: 4px 8px;
  border-radius: 6px;
  background: transparent;
  color: var(--blue);
}
```

```html
<!-- ä½¿ç”¨ -->
<button class="btn-primary">å‘é€</button>
<button class="btn-copy">ä¸‹è½½</button>
<button class="btn-icon">æ˜¾ç¤º</button>
```

**ä¸ºä»€ä¹ˆè¿™æ ·å¥½ï¼Ÿ**

1. **é¿å…é‡å¤**ï¼šæŒ‰é’®æ ·å¼åªå†™ä¸€æ¬¡
2. **ç»Ÿä¸€é£æ ¼**ï¼šæ‰€æœ‰æŒ‰é’®è§†è§‰ä¸€è‡´
3. **æ˜“äºä¿®æ”¹**ï¼šæ”¹ .btn-primaryï¼Œæ‰€æœ‰ä¸»æŒ‰é’®éƒ½å˜

---

#### **å¦‚æœåˆ†ç¦»CSSä¼šæ€æ ·ï¼Ÿ**

```css
/* âŒ ä¸å¥½ï¼šæ‹†æˆå¤šä¸ªæ–‡ä»¶ */

/* ai.css */
.ai-send-button {
  padding: 0 20px;
  height: 44px;
  border-radius: 22px;
  background: linear-gradient(180deg, #2aabee, #5ebce6);
  color: #fff;
}

/* wordbook.css */
.wb-load-button {
  padding: 0 20px;    /* â† é‡å¤äº†ï¼ */
  height: 44px;       /* â† é‡å¤äº†ï¼ */
  border-radius: 22px; /* â† é‡å¤äº†ï¼ */
  background: linear-gradient(180deg, #2aabee, #5ebce6);  /* â† é‡å¤äº†ï¼ */
  color: #fff;
}

/* lookup.css */
.lookup-search-button {
  padding: 0 20px;    /* â† åˆé‡å¤äº†ï¼ */
  height: 44px;
  border-radius: 22px;
  background: linear-gradient(180deg, #2aabee, #5ebce6);
  color: #fff;
}

/* é—®é¢˜ï¼š
1. å†™äº†3éç›¸åŒä»£ç 
2. è®¾è®¡å¸ˆè¯´æ”¹åœ†è§’ä¸º16px â†’ è¦æ”¹3ä¸ªæ–‡ä»¶
3. å¯èƒ½æ¼æ”¹æŸä¸ªæ–‡ä»¶ â†’ æ ·å¼ä¸ä¸€è‡´
*/
```

---

### æ¡ˆä¾‹3ï¼šæµå¼å“åº”çš„ä»£ç å¤ç”¨

#### **å½“å‰ç»“æ„ï¼ˆä¼˜ç§€ï¼‰**

```python
# routers/ai.py

# æå–å…¬å…±å‡½æ•°
def _get_api_key_from_payload(payload: dict) -> str:
    """ä»payloadä¸­è·å–APIå¯†é’¥ï¼ˆæ”¯æŒé¢„ç½®å¯†é’¥ï¼‰"""
    api_key = (payload.get("api_key") or "").strip()
    key_index = payload.get("key_index", None)
    
    if (not api_key) and key_index is not None:
        try:
            idx = int(key_index)
            raw_keys = _load_api_keys_raw()
            if 0 <= idx < len(raw_keys):
                api_key = raw_keys[idx]
        except Exception:
            pass
    
    return api_key

# æ™®é€šèŠå¤©æ¥å£
@router.post("/api/ai/chat")
async def api_ai_chat(payload: dict):
    api_key = _get_api_key_from_payload(payload)  # â† å¤ç”¨
    ...

# æµå¼èŠå¤©æ¥å£
@router.post("/api/ai/chat/stream")
async def api_ai_chat_stream(payload: dict):
    api_key = _get_api_key_from_payload(payload)  # â† å¤ç”¨
    ...
```

**ä¼˜åŠ¿ï¼š**
1. **é¿å…é‡å¤**ï¼šAPIå¯†é’¥è·å–é€»è¾‘åªå†™ä¸€æ¬¡
2. **æ˜“äºä¿®æ”¹**ï¼šæ”¹å¯†é’¥éªŒè¯é€»è¾‘ï¼Œä¸¤ä¸ªæ¥å£éƒ½ç”Ÿæ•ˆ
3. **å‡å°‘Bug**ï¼šä¸ä¼šå‡ºç°ä¸€ä¸ªæ¥å£ä¿®å¤äº†ï¼Œå¦ä¸€ä¸ªå¿˜è®°ä¿®å¤

---

## 7. å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ

### é™·é˜±1ï¼šç›²ç›®æ‹†åˆ†

```
âŒ é”™è¯¯æ€ç»´ï¼š
"æ–‡ä»¶å¤ªå¤§äº†ï¼Œå¿…é¡»æ‹†åˆ†ï¼"
â†’ ç»“æœï¼šæ‹†æˆå¾ˆå¤šå°æ–‡ä»¶ï¼Œåè€Œéš¾ä»¥ç»´æŠ¤

âœ… æ­£ç¡®æ€ç»´ï¼š
"è¿™ä¸ªæ–‡ä»¶æ˜¯å¦éš¾ä»¥ç»´æŠ¤ï¼Ÿ"
"æ‹†åˆ†åæ˜¯å¦æ›´å®¹æ˜“ç†è§£ï¼Ÿ"
"æ˜¯å¦ä¼šäº§ç”Ÿé‡å¤ä»£ç ï¼Ÿ"
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
```
æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰æ‹†åˆ†ï¼š
1. æ–‡ä»¶ > 500è¡Œ ä¸”
2. åŒ…å«å¤šä¸ªç‹¬ç«‹åŠŸèƒ½ ä¸”
3. åŠŸèƒ½ä¹‹é—´è€¦åˆåº¦ä½ ä¸”
4. æ‹†åˆ†åä¸ä¼šäº§ç”Ÿå¤§é‡é‡å¤ä»£ç 
```

---

### é™·é˜±2ï¼šæ‹†åˆ†è¿‡ç»†

```javascript
// âŒ ä¸å¥½ï¼šæ‹†åˆ†è¿‡ç»†
// button-primary.js (10è¡Œ)
export function createPrimaryButton() { ... }

// button-secondary.js (10è¡Œ)
export function createSecondaryButton() { ... }

// button-icon.js (8è¡Œ)
export function createIconButton() { ... }

// é—®é¢˜ï¼š
// - å¤ªå¤šå°æ–‡ä»¶ï¼Œåè€Œæ··ä¹±
// - æ‰¾ä¸€ä¸ªæŒ‰é’®ç›¸å…³ä»£ç è¦æ‰“å¼€3ä¸ªæ–‡ä»¶

// âœ… å¥½ï¼šç›¸å…³åŠŸèƒ½æ”¾åœ¨ä¸€èµ·
// buttons.js (50è¡Œ)
export function createPrimaryButton() { ... }
export function createSecondaryButton() { ... }
export function createIconButton() { ... }
```

**åŸåˆ™ï¼š**
- ç›¸å…³çš„åŠŸèƒ½åº”è¯¥æ”¾åœ¨ä¸€èµ·
- å•ä¸ªæ–‡ä»¶ 50-300è¡Œ æ˜¯åˆç†èŒƒå›´

---

### é™·é˜±3ï¼šå¾ªç¯ä¾èµ–

```javascript
// âŒ ä¸å¥½ï¼šå¾ªç¯ä¾èµ–
// ai.js
import { updateLookup } from './lookup.js';
export function sendAIMessage() {
  updateLookup();  // AIåŠŸèƒ½ä¾èµ–lookup
}

// lookup.js
import { sendAIMessage } from './ai.js';  // â† å¾ªç¯äº†ï¼
export function updateLookup() {
  sendAIMessage();  // lookupåŠŸèƒ½ä¾èµ–AI
}

// è§£å†³æ–¹æ¡ˆï¼šé‡æ–°è®¾è®¡
// events.js - äº‹ä»¶æ€»çº¿
export const eventBus = {
  on(event, handler) { ... },
  emit(event, data) { ... }
};

// ai.js
import { eventBus } from './events.js';
eventBus.on('lookup-result', (data) => { ... });

// lookup.js
import { eventBus } from './events.js';
eventBus.emit('lookup-result', result);
```

---

### é™·é˜±4ï¼šè¿‡åº¦å¤ç”¨

```javascript
// âŒ ä¸å¥½ï¼šä¸ºäº†å¤ç”¨è€Œå¤ç”¨
function showMessage(type, title, content, duration, callback, options) {
  // è¯•å›¾ç”¨ä¸€ä¸ªå‡½æ•°å¤„ç†æ‰€æœ‰å¼¹çª—
  // ç»“æœå‚æ•°å¤ªå¤šï¼Œéš¾ä»¥ä½¿ç”¨
}

// âœ… å¥½ï¼šæ‹†åˆ†æˆå¤šä¸ªç®€å•å‡½æ•°
function showError(message) { ... }
function showSuccess(message) { ... }
function showConfirm(message, onConfirm) { ... }
```

---

## 8. æ€»ç»“ï¼šæ‚¨çš„é¡¹ç›®æ¶æ„è¯„ä»·

### âœ… åšå¾—å¥½çš„åœ°æ–¹

| æ–¹é¢ | è¯„ä»· | è¯´æ˜ |
|------|------|------|
| **JavaScriptæ¨¡å—åŒ–** | â­â­â­â­â­ | æŒ‰åŠŸèƒ½æ‹†åˆ†ï¼Œä¾èµ–æ¸…æ™°ï¼Œå¤ç”¨åˆç† |
| **CSSå•æ–‡ä»¶** | â­â­â­â­â­ | é¿å…é‡å¤ï¼Œä¸»é¢˜ç»Ÿä¸€ï¼Œæ€§èƒ½æœ€ä¼˜ |
| **Pythonåç«¯** | â­â­â­â­â­ | è·¯ç”±åˆ†ç¦»ï¼Œæ ¸å¿ƒæ¨¡å—æ¸…æ™° |
| **ä»£ç å¤ç”¨** | â­â­â­â­ | æå–äº†utils, domç­‰å…¬å…±æ¨¡å— |

---

### ğŸ¯ æ ¸å¿ƒåŸåˆ™æ€»ç»“

```
1. åŠŸèƒ½ç‹¬ç«‹ + ä»£ç é‡å¤§ â†’ æ‹†åˆ†æ¨¡å—
   ä¾‹ï¼šJavaScript 11ä¸ªæ–‡ä»¶ âœ…

2. é«˜åº¦å¤ç”¨ + ç»Ÿä¸€ä¸»é¢˜ â†’ å•æ–‡ä»¶
   ä¾‹ï¼šCSS å•æ–‡ä»¶ âœ…

3. é€»è¾‘ç›¸åŒ â†’ æå–å‡½æ•°
   ä¾‹ï¼š_get_api_key_from_payload âœ…

4. æ ·å¼ç›¸åŒ â†’ æå–CSSç±»
   ä¾‹ï¼š.button, .card âœ…
```

---

### ğŸ“‹ å¿«é€Ÿå†³ç­–è¡¨

**é‡åˆ°æ–°åŠŸèƒ½æ—¶ï¼Œé—®è‡ªå·±ï¼š**

| é—®é¢˜ | ç­”æ¡ˆ | å†³ç­– |
|------|------|------|
| è¿™ä¸ªåŠŸèƒ½ç‹¬ç«‹å—ï¼Ÿ | æ˜¯ | æ–°å»ºæ¨¡å— |
| ä»£ç é‡å¤§å—(>300è¡Œ)ï¼Ÿ | æ˜¯ | ç‹¬ç«‹æ–‡ä»¶ |
| æ ·å¼åœ¨å¤šå¤„ä½¿ç”¨å—ï¼Ÿ | æ˜¯ | æå–CSSç±» |
| é€»è¾‘åœ¨å¤šå¤„ä½¿ç”¨å—ï¼Ÿ | æ˜¯ | æå–å‡½æ•° |
| ä¾èµ–å…¨å±€çŠ¶æ€å—ï¼Ÿ | æ˜¯ | æ”¾åœ¨ä¸»æ¨¡å— |

---

### ğŸš€ ç»™æ‚¨çš„å»ºè®®

**ä¿æŒç°çŠ¶ï¼æ‚¨çš„æ¶æ„å·²ç»å¾ˆä¼˜ç§€ï¼š**

1. âœ… JavaScriptæ¨¡å—åŒ–åˆç†
2. âœ… CSSå•æ–‡ä»¶é«˜æ•ˆ
3. âœ… Pythonåç«¯ç»“æ„æ¸…æ™°
4. âœ… ä»£ç å¤ç”¨å¾—å½“

**ä¸éœ€è¦åšä»»ä½•æ”¹åŠ¨ï¼**

---

## ğŸ“ é™„å½•ï¼šç»™AIçš„æç¤ºè¯æ¨¡æ¿

### æ¨¡æ¿1ï¼šæ–°å¢åŠŸèƒ½

```
æˆ‘æƒ³æ–°å¢ä¸€ä¸ªã€åŠŸèƒ½åç§°ã€‘åŠŸèƒ½ï¼š
1. åŠŸèƒ½æè¿°ï¼š...
2. ä½¿ç”¨é¢‘ç‡ï¼šé«˜/ä¸­/ä½
3. ä¾èµ–æ¨¡å—ï¼š...
4. æ˜¯å¦ç‹¬ç«‹ï¼šæ˜¯/å¦

æŠ€æœ¯æ ˆï¼šFastAPI + åŸç”ŸJS + å•æ–‡ä»¶CSS
é¡¹ç›®æ¶æ„ï¼šã€å‚è€ƒå¼€å‘æŒ‡å—2.0ã€‘

è¯·å¸®æˆ‘ï¼š
1. åˆ¤æ–­æ˜¯å¦éœ€è¦æ–°å»ºæ¨¡å—
2. å¦‚æœéœ€è¦ï¼Œåº”è¯¥æ”¾åœ¨å“ªé‡Œ
3. å¦‚ä½•å¤ç”¨ç°æœ‰ä»£ç 
4. ç»™å‡ºå…·ä½“å®ç°æ–¹æ¡ˆ
```

### æ¨¡æ¿2ï¼šé‡æ„ä»£ç 

```
æˆ‘å‘ç°è¿™æ®µä»£ç é‡å¤äº†ï¼š
ã€ç²˜è´´é‡å¤ä»£ç ã€‘

åœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­ï¼š
- file1.js
- file2.js

è¯·å¸®æˆ‘ï¼š
1. åˆ†ææ˜¯å¦éœ€è¦æå–
2. æå–åˆ°å“ªä¸ªæ¨¡å—åˆé€‚
3. ç»™å‡ºé‡æ„æ–¹æ¡ˆ
4. è¯´æ˜ä¿®æ”¹å½±å“èŒƒå›´
```

### æ¨¡æ¿3ï¼šä¼˜åŒ–æ€§èƒ½

```
æˆ‘çš„ã€æŸåŠŸèƒ½ã€‘æ€§èƒ½ä¸ä½³ï¼š
å½“å‰å®ç°ï¼šã€ç²˜è´´ä»£ç ã€‘
æ€§èƒ½é—®é¢˜ï¼š...

è¯·å¸®æˆ‘ï¼š
1. åˆ†ææ€§èƒ½ç“¶é¢ˆ
2. åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹†åˆ†/åˆå¹¶
3. ç»™å‡ºä¼˜åŒ–æ–¹æ¡ˆ
4. ä¿æŒç°æœ‰æ¶æ„é£æ ¼
```

---

**ç¥æ‚¨å¼€å‘é¡ºåˆ©ï¼** ğŸ‰

